// Firestore Security Rules for DeinContext
// Location: Firebase Console → Firestore Database → Rules
// 
// This file contains the recommended security rules for DeinContext.
// Copy and paste the rules section into your Firestore rules editor.

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // User vocabulary collection
    // Each user can only read/write their own vocabulary
    match /users/{userId}/vocab/{vocabId} {
      allow read, write, delete: if request.auth.uid == userId;
      
      // Prevent bulk operations
      allow list: if request.auth.uid == userId 
        && request.query.limit <= 100;
    }
    
    // User profile (optional)
    match /users/{userId} {
      allow read, write, delete: if request.auth.uid == userId;
    }
    
    // Deny all other access by default
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

/*
INSTALLATION STEPS:
1. Go to https://console.firebase.google.com/
2. Select your project
3. Navigate to Firestore Database → Rules
4. Replace existing rules with the rules above
5. Click "Publish"

TESTING:
- Use Firestore Rules Emulator during development
- Test with: firebase emulators:start
- Rules enforce: only users can access their own /vocab collection

TROUBLESHOOTING:
- "Missing or insufficient permissions" = User not authenticated or wrong UID
- Test rules before pushing to production using the Rules Simulator
*/
